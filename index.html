<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Car Catching Projectile Timing Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f9fa; padding: 20px; }
    h1 { text-align: center; }
    .calculator { max-width: 640px; margin: auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 12px; font-weight: bold; }
    select, input, button { width: 100%; padding: 10px; margin-top: 6px; border-radius: 8px; border: 1px solid #ccc; font-size: 14px; }
    .note { font-size: 13px; color: #333; margin-top: 6px; }
    button { background: #007bff; color: white; cursor: pointer; font-weight: bold; }
    button:hover { background: #0056b3; }
    .results { margin-top: 20px; padding: 15px; background: #f1f3f5; border-radius: 8px; font-family: monospace; white-space: pre-line; }
  </style>
</head>
<body>
  <h1>Car Catching Projectile Timing Calculator</h1>
  <div class="calculator">
    <label for="car">Choose car</label>
    <select id="car"></select>

    <label for="launcher">Choose launcher</label>
    <select id="launcher"></select>

    <label for="distance">Distance (m) â€” car to launcher (must be less than projectile range)</label>
    <input type="number" id="distance" placeholder="Enter distance in meters" step="0.01" value="1.00">

    <div class="note">Note: The car is always assumed to be between the launcher and the landing spot.</div>

    <button onclick="calculate()">Calculate timing</button>

    <div class="results" id="results"></div>
  </div>

  <script>
    const carVelocities = {
      "1": 0.197,
      "2": 0.231,
      "3": 0.283,
      "4": 0.286,
      "5": 0.262,
      "6": 0.376,
      "7": 0.244,
      "8": 0.306,
      "9": 0.301,
      "10": 0.285,
      "MIKEY": 0.44
    };

    const launcherData = {
      "1": { range: 1.63, time: 1.01 }
      "2": { range: 1.3975, time: 1.03025 },
      "3": { range: 1.6067, time: 1.0423 }
    };

    // populate selects
    const carSelect = document.getElementById('car');
    for (const k in carVelocities) {
      const o = document.createElement('option'); o.value = k; o.textContent = k; carSelect.appendChild(o);
    }
    const launcherSelect = document.getElementById('launcher');
    for (const k in launcherData) {
      const o = document.createElement('option'); o.value = k; o.textContent = k; launcherSelect.appendChild(o);
    }

    function calculate() {
      const carKey = carSelect.value;
      const launcherKey = launcherSelect.value;
      const distance = parseFloat(document.getElementById('distance').value);
      const out = document.getElementById('results');

      if (!carKey || !launcherKey || isNaN(distance) || distance < 0) {
        out.textContent = 'Please select car, launcher and enter a valid non-negative distance.'; return;
      }

      const v = carVelocities[carKey];
      const R = launcherData[launcherKey].range; // landing spot is at x = +R (launcher at x = 0)
      const Tproj = launcherData[launcherKey].time; // projectile flight time

      if (distance >= R) {
        out.textContent = `Invalid input: Car distance (${distance.toFixed(3)} m) must be less than projectile range (${R.toFixed(3)} m).`;
        return;
      }

      // Car starts between launcher and landing spot
      const x0 = distance;
      const xLand = R;
      const travelNeeded = xLand - x0;

      const carTravelTime = travelNeeded / v;
      const delay = carTravelTime - Tproj;

      let recommendedDelay = delay;
      let recommendedAction = '';
      if (delay >= 0) {
        recommendedAction = `Start the car now. Wait ${delay.toFixed(3)} s and fire.`;
      } else {
        recommendedAction = `Car would arrive ${(-delay).toFixed(3)} s earlier than the projectile. Fire immediately (delay = 0 s), or slow/start the car later to sync.`;
        recommendedDelay = 0;
      }

      const carPositionAtFire = x0 + v * recommendedDelay;
      const t_land = recommendedDelay + Tproj;
      const carPosAtLanding = x0 + v * t_land;

      let s = '';
      s += `Results:\n`;
      s += `Car velocity: ${v.toFixed(3)} m/s\n`;
      s += `Starting distance (car to launcher): ${distance.toFixed(3)} m\n`;
      s += `Launcher -> landing spot (range): ${R.toFixed(3)} m\n`;
      s += `Projectile flight time: ${Tproj.toFixed(3)} s\n`;
      s += `Car start position (relative to launcher): ${x0.toFixed(3)} m\n`;
      s += `Distance car must travel to landing spot: ${travelNeeded.toFixed(3)} m\n`;
      s += `Time for car to reach landing spot: ${carTravelTime.toFixed(3)} s\n\n`;

      s += `${recommendedAction}\n`;
      s += `Car position when you should fire: ${carPositionAtFire.toFixed(3)} m (measured from launcher)\n`;
      s += `Projectile lands at t = ${t_land.toFixed(3)} s, car will be at: ${carPosAtLanding.toFixed(3)} m (should equal landing spot ${xLand.toFixed(3)} m)\n`;

      out.textContent = s;
    }
  </script>
</body>
</html>
